type: custom:vertical-stack-in-card
title: Morgondagens Timpris
style: |
  ha-card {
  box-shadow: 2px;
  background: transparent:
  margin: 15px:
  }
cards:
  - type: custom:apexcharts-card
    experimental:
      color_threshold: true
      brush: true
    graph_span: 24h
    apex_config:
      chart:
        height: 300px
      legend:
        showForSingleSeries: true
      plotOptions:
        bar:
          borderRadius: 2
      yaxis:
        decimalsInFloat: 2
        tickAmount: 10
        forceNiceScale: true
      xaxis:
        labels:
          datetimeFormatter:
            hour: HH
    all_series_config:
      show:
        offset_in_name: false
    header:
      title: ' '
      show: true
      show_states: true
      colorize_states: true
    span:
      start: day
      offset: +1d
    series:
      - entity: sensor.nordpool_kwh_se3_sek_3_095_025
        type: area
        color_threshold:
          - value: -10
            color: cyan
          - value: 20
            color: green
          - value: 65
            color: orange
          - value: 150
            color: red
          - value: 300
            color: black
        float_precision: 2
        stroke_width: 2
        name: Morgondagens timpris
        show:
          in_header: false
          legend_value: false
          extremas: true
        data_generator: |
          return entity.attributes.raw_tomorrow.map((start, index) => {
            return [new Date(start["start"]).getTime(), entity.attributes.raw_tomorrow[index]["value"]];
          });
      - entity: sensor.nordpool_diy_sensor_median_tomorrow
        type: line
        color: purple
        float_precision: 2
        stroke_width: 2
        name: Värmepumpens högsta pris
        group_by:
          duration: 1d
        show:
          in_chart: true
          legend_value: true
